(function(t){function e(e){for(var s,a,r=e[0],l=e[1],m=e[2],c=0,d=[];c<r.length;c++)a=r[c],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&d.push(n[a][0]),n[a]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(d.length)d.shift()();return i.push.apply(i,m||[]),o()}function o(){for(var t,e=0;e<i.length;e++){for(var o=i[e],s=!0,r=1;r<o.length;r++){var l=o[r];0!==n[l]&&(s=!1)}s&&(i.splice(e--,1),t=a(a.s=o[0]))}return t}var s={},n={app:0},i=[];function a(e){if(s[e])return s[e].exports;var o=s[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=s,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(o,s,function(e){return t[e]}.bind(null,s));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var m=0;m<r.length;m++)e(r[m]);var u=l;i.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},1:function(t,e){},"2e11":function(t,e,o){},"3e0c":function(t,e,o){"use strict";var s=o("2e11"),n=o.n(s);n.a},4977:function(t,e,o){"use strict";var s=o("515e"),n=o.n(s);n.a},"515e":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var s=o("2b0e"),n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("router-view",{attrs:{to:"/"}})],1)},i=[],a=(o("ac1f"),o("5319"),{mounted:function(){var t=this;this.sockets.listener.subscribe("del",(function(){alert("该群聊已解散"),t.$router.replace("/")}))}}),r=a,l=o("2877"),m=Object(l["a"])(r,n,i,!1,null,null,null),u=m.exports,c=o("8c4f"),d=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"index"}},[t.qq?t._e():o("div",{attrs:{id:"_room"}},t._l(t.list,(function(e,s){return o("div",{key:s,staticClass:"room",on:{click:function(o){return t.to(e)}}},[t._v(" "+t._s(e.name)+" "),o("p",[t._v(t._s(e.num)+"人")])])})),0),t.qq?t._e():o("div",{attrs:{id:"add"},on:{click:t.ad}},[t._v("自定义房间")]),t.qq?o("div",{staticClass:"mtk1"},[t._v(" Q Q："),o("input",{directives:[{name:"model",rawName:"v-model",value:t.login.qq,expression:"login.qq"}],attrs:{type:"text"},domProps:{value:t.login.qq},on:{input:function(e){e.target.composing||t.$set(t.login,"qq",e.target.value)}}}),o("br"),o("br"),t._v(" 昵称："),o("input",{directives:[{name:"model",rawName:"v-model",value:t.login.name,expression:"login.name"}],attrs:{type:"text"},domProps:{value:t.login.name},on:{input:function(e){e.target.composing||t.$set(t.login,"name",e.target.value)}}}),o("br"),o("br"),o("button",{on:{click:t.user}},[t._v("确定")])]):t._e(),t.key?o("div",{staticClass:"mtk"},[t._v(" 房间名："),o("input",{directives:[{name:"model",rawName:"v-model",value:t.room.name,expression:"room.name"}],attrs:{type:"text"},domProps:{value:t.room.name},on:{input:function(e){e.target.composing||t.$set(t.room,"name",e.target.value)}}}),o("br"),o("br"),t._v(" 密 码："),o("input",{directives:[{name:"model",rawName:"v-model",value:t.room.password,expression:"room.password"}],attrs:{type:"password",maxlength:"6",placeholder:"默认无密码"},domProps:{value:t.room.password},on:{input:function(e){e.target.composing||t.$set(t.room,"password",e.target.value)}}}),o("br"),o("br"),t._v(" 最多人数："),o("input",{directives:[{name:"model",rawName:"v-model",value:t.room.maxNum,expression:"room.maxNum"}],attrs:{type:"range",max:"100",min:"2"},domProps:{value:t.room.maxNum},on:{__r:function(e){return t.$set(t.room,"maxNum",e.target.value)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.room.maxNum,expression:"room.maxNum"}],staticClass:"range",attrs:{type:"text"},domProps:{value:t.room.maxNum},on:{input:function(e){e.target.composing||t.$set(t.room,"maxNum",e.target.value)}}}),o("br"),o("br"),o("button",{on:{click:t.add}},[t._v("确定")]),o("button",{on:{click:function(e){t.key=!1}}},[t._v("取消")])]):t._e(),t.key1?o("div",{staticClass:"roomPass"},[t._v(" 密码："),o("input",{directives:[{name:"model",rawName:"v-model",value:t.pass,expression:"pass"}],attrs:{type:"password"},domProps:{value:t.pass},on:{input:function(e){e.target.composing||(t.pass=e.target.value)}}}),o("br")]):t._e(),t.key?o("div",{attrs:{id:"mtk_bg"}}):t._e(),t.key1?o("div",{attrs:{id:"mtk_bg"},on:{click:function(e){t.key1=!1}}}):t._e()])},p=[],g=(o("b0c0"),{data:function(){return{list:[],qq:!1,key:!1,key1:!1,pass:"",login:{name:"",qq:""},room:{name:"",password:"",maxNum:"50",roomHost:""}}},watch:{pass:function(t){t===this.key1&&(this.key1=!1,this.$router.push("/room/"+this.passRoom))}},methods:{init:function(){var t=this,e=this.$socket;this.sockets.listener.subscribe("list",(function(e){t.list=e})),e.emit("get",1)},user:function(){this.login.name&&this.login.qq&&(this.login.qq="https://q2.qlogo.cn/headimg_dl?dst_uin=".concat(this.login.qq,"&spec=100"),this.$store.commit("add",this.login),this.qq=!1,localStorage.login=JSON.stringify(this.login))},to:function(t){return t.roomHost==JSON.parse(localStorage.login).name?this.$router.push("/room/"+t.id):(console.log(t),t.maxNum<=t.num?alert("房间人数已满！"):void(t.password?(this.key1=t.password,this.passRoom=t.id):this.$router.push("/room/"+t.id)))},ad:function(){this.key=!0,this.room.name=JSON.parse(localStorage.login).name+"的房间"},add:function(){this.key=!1,this.room.roomHost=JSON.parse(localStorage.login).name,this.$socket.emit("addRoom",this.room)}},created:function(){var t=this;localStorage.login||(this.qq=!0),this.sockets.listener.subscribe("id",(function(e){if(0==e)return alert("房间已经存在！");t.$router.push("/room/"+e)})),this.$store.commit("add",JSON.parse(localStorage.login)),this.init()}}),v=g,h=(o("3e0c"),Object(l["a"])(v,d,p,!1,null,null,null)),f=h.exports,_=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"head"},[o("ion-icon",{staticClass:"i",attrs:{name:"chevron-back-outline"},on:{click:function(e){return t.$router.replace("/")}}}),o("div",[t._v(t._s(t.room.name)+"（"+t._s(t.room.num)+"）")]),t.key==t.room.roomHost?o("div",{staticClass:"del",on:{click:t.del}},[t._v("解散群聊")]):t._e()],1),o("div",{staticClass:"_head"}),o("div",{staticClass:"bg",style:{height:t.height},attrs:{id:"bg"}},t._l(t.list,(function(e,s){return o("div",{key:s,class:e.name===t.me.name&&e.qq===t.me.qq?"_item":"item"},[e.qq?o("img",{attrs:{src:e.qq,alt:""}}):t._e(),o("p",{staticClass:"name"},[t._v(t._s(e.name))]),e.name?o("div",{staticClass:"message"},[e.msg.url?t._e():o("p",{staticClass:"msg"},[t._v(t._s(e.msg))]),e.msg.url?o("img",{attrs:{src:e.msg.url,alt:""}}):t._e()]):t._e(),e.userName?o("div",{staticClass:"add"},[t._v(t._s(e.userName)+"加入了房间")]):t._e(),e.userName1?o("div",{staticClass:"add"},[t._v(t._s(e.userName1)+"离开了房间")]):t._e(),e.time?o("div",{staticClass:"add1"},[t._v(t._s(e.time))]):t._e()])})),0),o("div",{staticClass:"_bg",style:{height:t.height}}),o("div",{staticClass:"foot"},[o("div",{staticClass:"bgFile"},[o("input",{ref:"file",staticClass:"file",attrs:{type:"file",accept:"image/*",name:"",id:""},on:{change:t.img}})]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],attrs:{type:"text"},domProps:{value:t.msg},on:{input:function(e){e.target.composing||(t.msg=e.target.value)}}}),o("button",{on:{click:t.go}},[t._v("发送")])])])},b=[],y=o("5530"),k={data:function(){return{height:"",list:[],key:JSON.parse(localStorage.login).name,msg:"",userName:"",url:"",room:{name:"房间名字",num:0},me:JSON.parse(localStorage.login)}},methods:{go:function(){if(this.msg){var t=this.$socket;t.emit("msg",this.msg,this.$store.state.login),this.msg=""}},img:function(){var t=this,e=this.$refs.file.files,o=new FormData;o.append("file",e[0]),this.axios.post("http://192.168.0.105:8000/list",o).then((function(){t.$socket.emit("msg","",t.$store.state.login,1)}))},del:function(){this.$socket.emit("delRoom",this.room.id),this.$router.replace("/")}},destroyed:function(){this.$socket.emit("msg",2)},mounted:function(){var t=this;window.addEventListener("beforeunload",(function(){t.$socket.emit("msg",2)})),this.$store.commit("add",JSON.parse(localStorage.login));var e=this.$socket;this.sockets.listener.subscribe("room",(function(e){t.room=Object(y["a"])({},e[0]),t.userName=e[1]})),e.emit("room",this.$route.params.id,JSON.parse(localStorage.login).name),e.emit("msg",1),this.sockets.listener.subscribe("msg",(function(e){t.list=e,t.$nextTick((function(){var t=document.getElementById("bg");t.scrollTop=t.scrollHeight}))})),this.height=window.innerHeight+"px"}},x=k,q=(o("4977"),Object(l["a"])(x,_,b,!1,null,null,null)),w=q.exports;s["a"].use(c["a"]);var N=[{path:"/",name:"index",component:f},{path:"/room/:id",name:"room",component:w}],$=new c["a"]({routes:N}),O=$,S=o("2f62");s["a"].use(S["a"]);var C=new S["a"].Store({state:{login:{}},mutations:{add:function(t,e){t.login=Object(y["a"])({},e)}},actions:{},modules:{}}),P=o("5132"),j=o.n(P),J=o("8055"),H=o.n(J),E=o("bc3a"),T=o.n(E);s["a"].prototype.axios=T.a,s["a"].use(new j.a({debug:!0,connection:H()("http://192.168.0.105:8888")})),s["a"].config.productionTip=!1,new s["a"]({router:O,store:C,render:function(t){return t(u)}}).$mount("#app")}});
//# sourceMappingURL=app.207a35ba.js.map